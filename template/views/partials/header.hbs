<div class="top-tagbar">
    <div class="w-100">
        <div class="row justify-content-between align-items-center">
            <div class="col-md-4 col-9">
                <div class="fs-14 fw-medium">
                    <i class="bi bi-geo-alt align-middle me-2"></i> Phoenix, USA
                </div>
            </div>
            <div class="col-md-4 col-6 d-none d-xxl-block">
                <div class="d-flex align-items-center justify-content-center gap-3 fs-14 fw-medium">
                    <div>
                        <i class="bi bi-envelope align-middle me-2"></i> support@themesbrand.com
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-3">
                <div class="d-flex align-items-center justify-content-end gap-3 fs-14">
                    <div class="text-reset fw-normal d-none d-lg-block">
                        <i class="bi bi-telephone-outbound align-middle me-2"></i> +(235) 01234 5678
                    </div>
                    <hr class="vr d-none d-lg-block">
                    <div class="dropdown topbar-head-dropdown topbar-tag-dropdown justify-content-end">
                        <button type="button" class="btn btn-icon btn-topbar text-reset rounded-circle fs-14 fw-medium"
                            data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img id="header-lang-img" src="images/us.svg" alt="Header Language" height="16"
                                class="rounded-circle me-2"> <span id="lang-name">English</span>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end">
                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item language py-2" data-lang="en"
                                title="English">
                                <img src="images/us.svg" alt="user-image" class="me-2 rounded-circle" height="18">
                                <span class="align-middle">English</span>
                            </a>
                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="sp"
                                title="Spanish">
                                <img src="images/spain.svg" alt="user-image" class="me-2 rounded-circle" height="18">
                                <span class="align-middle">Española</span>
                            </a>
                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="gr"
                                title="German">
                                <img src="images/germany.svg" alt="user-image" class="me-2 rounded-circle" height="18">
                                <span class="align-middle">Deutsche</span>
                            </a>
                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="it"
                                title="Italian">
                                <img src="images/italy.svg" alt="user-image" class="me-2 rounded-circle" height="18">
                                <span class="align-middle">Italiana</span>
                            </a>
                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="ru"
                                title="Russian">
                                <img src="images/russia.svg" alt="user-image" class="me-2 rounded-circle" height="18">
                                <span class="align-middle">русский</span>
                            </a>
                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="ch"
                                title="Chinese">
                                <img src="images/china.svg" alt="user-image" class="me-2 rounded-circle" height="18">
                                <span class="align-middle">中国人</span>
                            </a>
                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="fr"
                                title="French">
                                <img src="images/french.svg" alt="user-image" class="me-2 rounded-circle" height="18">
                                <span class="align-middle">français</span>
                            </a>
                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item language" data-lang="sa"
                                title="Arabic">
                                <img src="images/sa.svg" alt="user-image" class="me-2 rounded-circle" height="18">
                                <span class="align-middle">عربى</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<nav class="navbar navbar-expand-lg ecommerce-navbar" id="navbar">
    <div class="container">
        <a class="navbar-brand d-none d-lg-block" href="/">
            <div class="logo-dark">
                <img src="logo/hsdhf.png" alt="" height="25">
            </div>
            <div class="logo-light">
                <img src="images/logo-light.png" alt="" height="25">
            </div>
        </a>
        <button class="btn btn-soft-primary btn-icon d-lg-none" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <i class="bi bi-list fs-20"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mx-lg-auto mb-2 mb-lg-0" id="navigation-menu">
                <li class="nav-item d-block d-lg-none">
                    <a class="d-block p-3 h-auto text-center" href="/">
                        <img src="images/logo-dark.png" alt="" height="25" class="card-logo-dark mx-auto">
                        <img src="images/logo-light.png" alt="" height="25" class="card-logo-light mx-auto">
                    </a>
                </li>
                <li class="nav-item dropdown dropdown-hover">
                    <a class="nav-link " data-key="t-demos" href="/" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Home
                    </a>

                </li>
                <li class="nav-item dropdown dropdown-hover dropdown-mega-full">
                    <a class="nav-link dropdown-toggle" data-key="t-catalog" href="/" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Categories
                    </a>
                    <div class="dropdown-menu p-0">
                        <div class="row g-0 g-lg-4">
                            <div class="col-lg-2 d-none d-lg-block">
                                <div class="card rounded-start rounded-0 border-0 h-100 mb-0 overflow-hidden"
                                    style="background-image: url('images/img-1.jpg');background-size: cover;">
                                    <div class="bg-overlay bg-light bg-opacity-25"></div>
                                    <div class="card-body d-flex align-items-center justify-content-center">
                                        <div class="text-center">
                                            <a href="/Shopnow" class="btn btn-secondary btn-hover"><i
                                                    class="ph-storefront align-middle me-1"></i> <span
                                                    data-key="t-shop-now">Shop Now</span></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-2">
                                <ul class="dropdown-menu-list list-unstyled mb-0 py-3">
                                    <li>
                                        <p class="mb-2 text-uppercase fs-11 fw-medium text-muted menu-title"
                                            data-key="t-others">Latest</p>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/watch" class="nav-link" data-key="t-unique-watches">Unique Watches</a>
                                    </li>
                                    <!-- <li class="nav-item">
                            <a href="modern-fashion.html" class="nav-link" data-key="t-modern-fashion">Modern Fashion</a>
                        </li> -->
                                    <li class="nav-item">
                                        <a href="/trend" class="nav-link" data-key="t-trend-fashion">Trend Fashion</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-lg-2">
                                <ul class="dropdown-menu-list list-unstyled mb-0 py-3">
                                    <li>
                                        <p class="mb-2 text-uppercase fs-11 fw-medium text-muted menu-title"
                                            data-key="t-men">Men</p>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-clothing">Clothing</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-watches">Watches</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-bags-Luggage">Bags &amp;
                                            Luggage</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-footwear">Footwear</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-innerwear">Innerwear</a>
                                    </li>

                                </ul>
                            </div>
                            <div class="col-lg-2">
                                <ul class="dropdown-menu-list list-unstyled mb-0 py-3">
                                    <li>
                                        <p class="mb-2 text-uppercase fs-11 fw-medium text-muted menu-title"
                                            data-key="t-women">Women</p>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-western-wear">Western Wear</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-handbags-clutches">Handbags
                                            &amp; Clutches</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-lingerie-nightwear">Lingerie
                                            &amp; Nightwear</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-footwear">Footwear</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link" data-key="t-innerwear">Innerwear</a>
                                    </li>

                                </ul>
                            </div>
                            <div class="col-lg-2">
                                <ul class="dropdown-menu-list list-unstyled mb-0 py-3">
                                    <li>
                                        <p class="mb-2 text-uppercase fs-11 fw-medium text-muted menu-title"
                                            data-key="t-accessories-others">Accessories</p>
                                    </li>

                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link"
                                            data-key="t-beauty-health-grocery">Beauty</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link"
                                            data-key="t-sports-fitness-bags-luggage">Sports, Fitness, Bags, Luggage</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/Shopnow" class="nav-link"
                                            data-key="t-sports-fitness-bags-luggage">Perfumes And Sprays</a>
                                    </li>

                                </ul>
                            </div>

                        </div>
                    </div>
                </li>
                <li class="nav-item dropdown dropdown-hover">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false" data-key="t-shop">
                        Help
                    </a>
                    <div class="dropdown-menu dropdown-mega-menu-xl dropdown-menu-center p-0">
                        <div class="row g-0 g-lg-4">
                            <div class="col-lg-5 d-none d-lg-block">
                                <div class="card rounded-start rounded-0 border-0 h-100 mb-0 overflow-hidden"
                                    style="background-image: url('images/img-2.jpg'); background-size: cover;">
                                    <div class="bg-overlay bg-primary" style="opacity: 0.90;"></div>
                                    <div
                                        class="card-body d-flex align-items-center justify-content-center position-relative">
                                        <div class="text-center">
                                            <h6 class="card-title text-white">Welcome to Toner</h6>
                                            <p class="text-white-75">See all the products at once.</p>
                                            <a href="/Shopnow" class="btn btn-light btn-sm btn-hover">Shop Now <i
                                                    class="ph-arrow-right align-middle"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-7">
                                <div class="row g-0 g-lg-4">
                                    <div class="col-lg-6">
                                        <div class="py-3">
                                            <ul class="dropdown-menu-list list-unstyled mb-0">
                                                <li>
                                                    <p class="mb-2 text-uppercase fs-11 fw-medium text-muted menu-title"
                                                        data-key="t-checkout-pages">Help Pages</p>
                                                </li>
                                                <li class="nav-item">
                                                    <a href="/purchase" class="nav-link"
                                                        data-key="t-purchase-guide">Purchase Guide</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a href="/ecommerce" class="nav-link" data-key="t-faq">FAQ</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a href="/terms" class="nav-link"
                                                        data-key="t-terms-of-service">Terms of Service</a>
                                                </li>

                                            </ul>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link " data-key="t-about-us" href="/about">
                        About Us
                    </a>

                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/contact" data-key="t-contact">Contact</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/indexbackend" data-key="t-contact">backend</a>
                </li>
            </ul>
        </div>
        <div class="bg-overlay navbar-overlay" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent.show">
        </div>

        <div class="d-flex align-items-center">
            <button type="button" class="btn btn-icon btn-topbar btn-ghost-dark rounded-circle text-muted"
                data-bs-toggle="modal" data-bs-target="#searchModal">
                <i class="bx bx-search fs-22"></i>
            </button>
            <div class="topbar-head-dropdown ms-1 header-item">
                <button type="button" class="btn btn-icon btn-topbar btn-ghost-dark rounded-circle text-muted"
                    data-bs-toggle="offcanvas" data-bs-target="#ecommerceCart" aria-controls="ecommerceCart">
                    <i class="ph-shopping-cart fs-18"></i>
                    <span
                        class="position-absolute topbar-badge cartitem-badge fs-10 translate-middle badge rounded-pill bg-danger"
                        id="cartItemCount"></span>
                </button>
            </div>


            <div class="dropdown header-item dropdown-hover-end" id="loginContainer">
                <a href="/login" class="nav-link">
                    <button type="button" class="btn btn-danger btn-hover p-1 mx-2 d-flex" aria-expanded="false">
                        <i class="ph-user-circle fs-22 mx-1"></i>

                        Login

                    </button>
                </a>
                <button type="button" class="btn btn-danger btn-hover p-1 mx-2" aria-expanded="false">
                    <a href="/signup" class="nav-link">

                        Sign Up
                    </a>
                </button>


            </div>
            <div id="username"></div>
            <div class="dropdown header-item dropdown-hover-end ">
                <button type="button" class="btn" id="page-header-user-dropdown" data-bs-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    <img class="rounded-circle header-profile-user" src="images/avatar-1.jpg" alt="Header Avatar">
                </button>

                <div class="dropdown-menu dropdown-menu-end">
                    <!-- item-->
                    <h6 class="dropdown-header">Welcome Diana!</h6>
                    <a class="dropdown-item" href="/order-history"><i
                            class="bi bi-cart4 text-muted fs-16 align-middle me-1"></i> <span class="align-middle">Order
                            History</span></a>
                    <a class="dropdown-item" href="/track"><i
                            class="bi bi-truck text-muted fs-16 align-middle me-1"></i> <span class="align-middle">Track
                            Orders</span></a>
                    <a class="dropdown-item" href="/ecommerce"><i
                            class="mdi mdi-lifebuoy text-muted fs-16 align-middle me-1"></i> <span
                            class="align-middle">Help</span></a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="/account"><span
                            class="badge bg-success-subtle text-success mt-1 float-end">New</span><i
                            class="mdi mdi-cog-outline text-muted fs-16 align-middle me-1"></i> <span
                            class="align-middle">Settings</span></a>
                    <a class="dropdown-item" href="/auth-logout"><i
                            class="bi bi-box-arrow-right text-muted fs-16 align-middle me-1"></i> <span
                            class="align-middle" data-key="t-logout">Logout</span></a>
                </div>
            </div>
        </div>
    </div>
</nav>


<!--cart -->
<div class="offcanvas offcanvas-end product-list" tabindex="-1" id="ecommerceCart" aria-labelledby="ecommerceCartLabel">
    <div class="offcanvas-header border-bottom">
        <h5 class="offcanvas-title" id="ecommerceCartLabel">My Cart <span
                class="badge bg-danger align-middle ms-1 cartitem-badge"> </span></h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body px-0">
        <div data-simplebar="" class="h-100">
            <ul class="list-group list-group-flush cartlist" id="cartItemLists">
                <!-- This is where the goods from the database will be displayed -->


            </ul>

            <div class="table-responsive mx-2 border-top border-top-dashed">
                <table class="table table-borderless mb-0 fs-14 fw-semibold">
                    <tbody>
                        <tr>
                            <td>Sub Total :</td>
                            <td class="text-end cart-subtotal"></td>
                        </tr>
                        <tr>
                            <td>Discount <span class="text-muted"></span>:</td>
                            <td class="text-end cart-discount"></td>
                        </tr>
                        <tr>
                            <td>Shipping Charge :</td>
                            <td class="text-end cart-shipping"></td>
                        </tr>
                        <tr>
                            <td>Estimated Tax (12.5%) : </td>
                            <td class="text-end cart-tax"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="offcanvas-footer border-top p-3 text-center">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="m-0 fs-16 text-muted">Total:</h6>
            <div class="px-2">
                <h6 class="m-0 fs-16 cart-total"></h6>
            </div>
        </div>
        <div class="row g-2">
            <div class="col-6">
                <a href="/shop-cart" type="button" class="btn btn-light w-100" id="reset-layout">View Cart</a>
            </div>
            <div class="col-6">
                <a href="/address" class="btn btn-info w-100">Continue to Checkout</a>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content rounded">
            <div class="modal-header p-3">
                <div class="position-relative w-100">
                    <input type="text" class="form-control form-control-lg border-2" placeholder="Search for Toner..."
                        autocomplete="off" id="search-options" value="">
                    <span class="bi bi-search search-widget-icon fs-17"></span>
                    <a href="javascript:void(0);"
                        class="search-widget-icon fs-14 link-secondary text-decoration-underline search-widget-icon-close d-none"
                        id="search-close-options">Clear</a>
                </div>
            </div>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0 overflow-hidden" id="search-dropdown">

                <div class="dropdown-head rounded-top">
                    <div class="p-3">
                        <div class="row align-items-center">
                            <div class="col">
                                <h6 class="m-0 fs-14 text-muted fw-semibold"> RECENT SEARCHES </h6>
                            </div>
                        </div>
                    </div>

                    <div class="dropdown-item bg-transparent text-wrap">
                        <a href="/" class="btn btn-soft-secondary btn-sm btn-rounded">how to setup <i
                                class="mdi mdi-magnify ms-1 align-middle"></i></a>
                        <a href="/" class="btn btn-soft-secondary btn-sm btn-rounded">buttons <i
                                class="mdi mdi-magnify ms-1 align-middle"></i></a>
                    </div>
                </div>

                <div data-simplebar="" style="max-height: 300px;" class="pe-2 ps-3 my-3">

                </div>
            </div>
        </div>
    </div>
</div>

<!-- removeItemModal -->
<div id="removeItemModal" class="modal fade zoomIn" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    id="close-modal"></button>
            </div>
            <div class="modal-body">
                <div class="mt-2 text-center">
                    <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
                        colors="primary:#f7b84b,secondary:#f06548" style="width:100px;height:100px"></lord-icon>
                    <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
                        <h4>Are you sure ?</h4>
                        <p class="text-muted mx-4 mb-0">Are you sure you want to remove this product ?</p>
                    </div>
                </div>
                <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
                    <button type="button" class="btn w-sm btn-light" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn w-sm btn-danger" id="remove-product">Yes, Delete It!</button>
                </div>
            </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="subscribeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0">
            <div class="modal-body p-0 bg-info-subtle rounded">
                <div class="row g-0 align-items-center">
                    <div class="col-lg-6">
                        <div class="p-4 h-100">
                            <span class="badge bg-info-subtle text-info  fs-13">GET 10% SALE OFF</span>
                            <h2 class="display-6 mt-2 mb-3">Subscribe &amp; Get <b>50% Special</b> Discount On Email
                            </h2>
                            <p class="mb-4 pb-lg-2 fs-16">Join our newsletter to receive the latest updates and
                                promotion</p>
                            <form action="#!">
                                <div class="position-relative ecommerce-subscript">
                                    <input type="email" class="form-control rounded-pill border-0"
                                        placeholder="Enter your email">
                                    <button type="submit" class="btn btn-info btn-hover rounded-pill">Subscript</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="p-4 pb-0">
                            <img src="images/subscribe.png" alt="" class="img-fluid">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end modal -->

<!-- <a href="../backend/index.html" class="btn btn-warning position-fixed bottom-0 start-0 m-5 z-3 btn-hover d-none d-lg-block"><i class="bi bi-database align-middle me-1"></i> Backend</a> -->

<!--start back-to-top-->
<button onclick="topFunction()" class="btn btn-info btn-icon" style="bottom: 50px;" id="back-to-top">
    <i class="ri-arrow-up-line"></i>
</button>
<script>
    const token = sessionStorage.getItem("token");
    const username = sessionStorage.getItem("username");
    
//Also download the item picture too in the getCartItem function;
async function getCartItem() {
    console.log(token);
    //Get cart items
    try {
      const data = {
        method: "GET",
        headers: {
          Authorization: `Bearer ${token}`,
          "Content-Type": "application/json",
        },
      };
      const response = await fetch("http://127.0.0.1:2500/carts", data);
      if (response.ok) {
        const items = await response.json();
        console.log(items);
        const { status, allItems } = items;
        document.getElementById("cartItemLists").innerHTML  =
          allItems.length;
        console.log(allItems);
        allItems.forEach((item) => {
          const itemDiv = `<li class="list-group-item product" id="cartItemForm">
            <input hidden value="${item._id}">
            <div class="d-flex gap-3">
                <div class="flex-shrink-0">
                    <div class="avatar-md" style="height: 100%;">
                        <div class="avatar-title bg-warning-subtle rounded-3">
                            <img src="images/img-4_1.png" alt="" class="avatar-sm">
                        </div>
                    </div>
                </div>
                <div class="flex-grow-1">
                    <a href="#!">
                        <h5 class="fs-15">${item.productTitle}</h5>
                    </a>
                    <div class="d-flex mb-3 gap-2">
                        <div class="text-muted fw-medium mb-0">₦<span class="product-price">${item.price}</span></div>
                        <div class="vr"></div>
                        <span class="text-success fw-medium">In Stock ${item.available}</span>
                    </div>
                    <div class="input-step">
                        <button type="button" class="minus">–</button>
                        <input type="number" class="product-quantity" value="2" min="0" max="100" readonly="">
                        <button type="button" class="plus">+</button>
                    </div>
                </div>
                <div class="flex-shrink-0 d-flex flex-column justify-content-between align-items-end">
                    <button type="button" class="btn btn-icon btn-sm btn-ghost-secondary remove-item-btn" data-bs-toggle="modal" data-bs-target="#removeItemModal"><i class="ri-close-fill fs-16"></i></button>
                    <div class="fw-medium mb-0 fs-16">₦<span class="product-line-price">${item.price}</span></div>
                </div>
            </div>
        </li>`;
          const cartItems = ` <div class="card product">
          <input hidden value="${item._id}">
        <div class="card-body p-4">
            <div class="row gy-3">
                <div class="col-sm-auto">
                    <div class="avatar-lg h-100">
                        <div class="avatar-title bg-secondary-subtle rounded py-3">
                            <img src="images/img-15.png" alt="" class="avatar-md">
                        </div>
                    </div>
                </div>
                <div class="col-sm">
                    <a href="#!">
                        <h5 class="fs-16 lh-base mb-1">${item.productTitle}</h5>
                    </a>
                    <ul class="list-inline text-muted fs-13 mb-3">
                        <li class="list-inline-item">Color : <span class="fw-medium"> ${
                          items.color ? item.color : " same as pic "
                        }</span></li>
                    </ul>
                    <div class="input-step">
                        <button type="button" class="minus">–</button>
                        <input type="number" class="product-quantity" value="1" min="0" max="100" readonly="">
                        <button type="button" class="plus">+</button>
                    </div>
                </div>
                <div class="col-sm-auto">
                    <div class="text-lg-end">
                        <p class="text-muted mb-1 fs-12">Item Price:</p>
                        <h5 class="fs-16">₦<span class="product-price">${
                          item.price
                        }</span></h5>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <div class="row align-items-center gy-3">
                <div class="col-sm">
                    <div class="d-flex flex-wrap my-n1">
                        <div >
                            <a href="#!" class="d-block text-body p-1 px-2" data-bs-toggle="modal" data-bs-target="#removeItemModal"><i class="ri-delete-bin-fill text-muted align-bottom me-1"></i> Remove</a>
                        </div>
                        <div>
                            <a href="#!" class="d-block text-body p-1 px-2"><i class="ri-star-fill text-muted align-bottom me-1"></i> Add Wishlist</a>
                        </div>
                    </div>
                </div>
                <div class="col-sm-auto">
                    <div class="d-flex align-items-center gap-2 text-muted">
                        <div>Total :</div>
                        <h5 class="fs-14 mb-0">₦<span class="product-line-price">${
                          item.price
                        }</span></h5>
                    </div>
                </div>
            </div>
        </div>
        <!-- end card footer -->
    </div>`;
        //   document.getElementById("cart_checkout_list").innerHTML += cartItems;
          document.getElementById("cartItemLists").innerHTML += itemDiv;
          // cart dropdown
  
          // input spin
          isData();
          function isData() {
            var plus = document.getElementsByClassName("plus");
            var minus = document.getElementsByClassName("minus");
            var product = document.getElementsByClassName("product");
  
            if (plus) {
              Array.from(plus).forEach(function (e) {
                e.addEventListener("click", function (event) {
                  // if(event.target.previousElementSibling.value )
                  if (
                    parseInt(e.previousElementSibling.value) <
                    event.target.previousElementSibling.getAttribute("max")
                  ) {
                    event.target.previousElementSibling.value++;
                    if (product) {
                      Array.from(product).forEach(function (x) {
                        updateQuantity(event.target);
                      });
                    }
                  }
                });
              });
            }
  
            if (minus) {
              Array.from(minus).forEach(function (e) {
                e.addEventListener("click", function (event) {
                  if (
                    parseInt(e.nextElementSibling.value) >
                    event.target.nextElementSibling.getAttribute("min")
                  ) {
                    event.target.nextElementSibling.value--;
                    if (product) {
                      Array.from(product).forEach(function (x) {
                        updateQuantity(event.target);
                      });
                    }
                  }
                });
              });
            }
          }
  
          var taxRate = 0.125;
          var shippingRate = 65.0;
          var discountRate = 0.15;
  
          var currencySign = "₦";
          var cartList = document.querySelectorAll(".cartlist li").length;
          document.querySelectorAll(".cartitem-badge").forEach(function (item) {
            item.innerHTML = cartList;
          });
  
          document.querySelectorAll(".product-list").forEach(function (elem) {
            elem.querySelectorAll(".product-count").forEach(function (subelem) {
              subelem.innerHTML = elem.querySelectorAll(".product").length;
            });
            recalculateCart(elem);
          });
  
          function recalculateCart(elm) {
            var subtotal = 0;
  
            Array.from(elm.getElementsByClassName("product")).forEach(function (
              item
            ) {
              Array.from(
                item.getElementsByClassName("product-line-price")
              ).forEach(function (e) {
                subtotal += parseFloat(e.innerHTML);
              });
            });
  
            /* Calculate totals */
            var tax = subtotal * taxRate;
            var discount = subtotal * discountRate;
  
            var shipping = subtotal > 0 ? shippingRate : 0;
            var total = subtotal + tax + shipping - discount;
  
            elm.querySelector(".cart-subtotal").innerHTML =
              currencySign + subtotal.toFixed(2);
            elm.querySelector(".cart-tax").innerHTML =
              currencySign + tax.toFixed(2);
            elm.querySelector(".cart-shipping").innerHTML =
              currencySign + shipping.toFixed(2);
            elm.querySelector(".cart-total").innerHTML =
              currencySign + total.toFixed(2);
            elm.querySelector(".cart-discount").innerHTML =
              "-" + currencySign + discount.toFixed(2);
          }
  
          function updateQuantity(quantityInput) {
            if (quantityInput.closest(".product")) {
              var productRow = quantityInput.closest(".product");
              var productList = quantityInput.closest(".product-list");
              var price;
              if (
                productRow ||
                productRow.getElementsByClassName("product-price")
              )
                Array.from(
                  productRow.getElementsByClassName("product-price")
                ).forEach(function (e) {
                  price = parseFloat(e.innerHTML);
                });
  
              if (
                quantityInput.previousElementSibling &&
                quantityInput.previousElementSibling.classList.contains(
                  "product-quantity"
                )
              ) {
                var quantity = quantityInput.previousElementSibling.value;
              } else if (
                quantityInput.nextElementSibling &&
                quantityInput.nextElementSibling.classList.contains(
                  "product-quantity"
                )
              ) {
                var quantity = quantityInput.nextElementSibling.value;
              }
              var linePrice = price * quantity;
              /* Update line price display and recalc cart totals */
              Array.from(
                productRow.getElementsByClassName("product-line-price")
              ).forEach(function (e) {
                e.innerHTML = linePrice.toFixed(2);
                recalculateCart(productList);
              });
            }
          }
  
          // Remove product from cart
          var removeProduct = document.querySelectorAll("#removeItemModal");
          if (removeProduct)
            removeProduct.forEach((product) =>
              product.addEventListener("show.bs.modal", function (e) {
                document
                  .getElementById("remove-product")
                  .addEventListener("click", function (event) {
                    e.relatedTarget.closest(".product").remove();
                    //Remove the item from the cart using its id;
                    const productToRemoveId = e.relatedTarget
                      .closest(".product")
                      .querySelector("input").value;
                    removeFromCart(productToRemoveId);
                   
                    
                    document.getElementById("close-modal").click();
                    document
                      .querySelectorAll(".cartitem-badge")
                      .forEach(function (item) {
                        item.innerHTML =
                          document.querySelectorAll(".cartlist li").length;
                      });
  
                    document
                      .querySelectorAll(".product-list")
                      .forEach(function (elem) {
                        elem
                          .querySelectorAll(".product-count")
                          .forEach(function (subelem) {
                            subelem.innerHTML =
                              elem.querySelectorAll(".product").length;
                          });
                        recalculateCart(elem);
                      });
                  });
              })
            );
        });
      }
    } catch (error) {
      console.log(error);
    }
  }
  async function removeFromCart(itemId) {
    const data = {
      method: "DELETE",
      headers: {
        Authorization: `Bearer ${token}`,
        "Content-Type": "application/json",
      },
    };
    const itemToCart = await fetch(`http://127.0.0.1:2500/cart/${itemId}`, data);
    if (itemToCart.ok) {
      getCartItem();
    }
  }
  getCartItem();
  
</script>

<!--end back-to-top-->